package com.example.riderapp.activity;import java.util.ArrayList;import java.util.List;import com.example.riderapp.R;import android.annotation.SuppressLint;import android.app.Activity;import android.app.ListActivity;import android.content.Context;import android.content.Intent;import android.graphics.Bitmap;import android.os.Bundle;import android.provider.MediaStore;import android.view.LayoutInflater;import android.view.Menu;import android.view.MenuItem;import android.view.View;import android.view.View.OnClickListener;import android.view.ViewGroup;import android.view.ViewGroup.LayoutParams;import android.widget.ArrayAdapter;import android.widget.ImageView;import android.widget.ImageView.ScaleType;import android.widget.LinearLayout;import android.widget.Toast;@SuppressLint("NewApi")public class CreateArticalActivity extends Activity {	private static final int CAMERA_REQUEST = 10001;	Bitmap[] bitmaps = new Bitmap[9];	LinearLayout photosLayout;	ImageView targetImg;	protected void onCreate(Bundle savedInstanceState) {		// TODO Auto-generated method stub		super.onCreate(savedInstanceState);		setContentView(R.layout.create_artical_layout);		photosLayout = (LinearLayout) findViewById(R.id.photos_layout);		ImageView imgBox = (ImageView) findViewById(R.id.photo_box);		imgBox.setOnClickListener(new AddPhotoListener());	}	@Override	public boolean onCreateOptionsMenu(Menu menu) {		getMenuInflater().inflate(R.menu.create_actical_menu, menu);		return true;	}	@Override	public boolean onOptionsItemSelected(MenuItem item) {		// TODO Auto-generated method stub		switch (item.getItemId()) {		case R.id.bar_takephoto:			Intent intent = new Intent(); 			intent.setAction(Intent.ACTION_GET_CONTENT);			intent.setType("image/*");			startActivityForResult(Intent.createChooser(intent, ""), 10002);			break;		default:			break;		}		return super.onOptionsItemSelected(item);	}	public static int dip2px(Context context, float dipValue) {		final float scale = context.getResources().getDisplayMetrics().density;		return (int) (dipValue * scale + 0.5f);	}	@Override	protected void onActivityResult(int requestCode, int resultCode, Intent data) {		Bitmap bitmap = null;		if (resultCode != Activity.RESULT_OK) {			return;		}		Bundle extras = data.getExtras();		switch (requestCode) {		case 10001:			bitmap = (Bitmap) extras.get("data");			break;		case 10002:			bitmap = (Bitmap) extras.get("data");			break;		default:			break;		}		targetImg.setImageBitmap(bitmap);		LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(				dip2px(this, 80), dip2px(this, 80));		layoutParams.setMargins(0, 0, dip2px(this, 5), 0);		ImageView img = new ImageView(photosLayout.getContext());		img.setLayoutParams(layoutParams);		img.setScaleType(ScaleType.FIT_XY);		img.setImageResource(R.drawable.photo_holder);		targetImg.setOnClickListener(new DelPhotoListener());		photosLayout.addView(img);		targetImg = img;		targetImg.setOnClickListener(new AddPhotoListener());		super.onActivityResult(requestCode, resultCode, data);	}	class AddPhotoListener implements OnClickListener {		@Override		public void onClick(View v) {			Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);			startActivityForResult(cameraIntent, CAMERA_REQUEST);			targetImg = (ImageView) v;		}	}	class DelPhotoListener implements OnClickListener {		@Override		public void onClick(View v) {			photosLayout.removeView(v);		}	}}